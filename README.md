# ЁЯза TryHackMe - Revenge

> ЁЯЯб р╕лр╕бр╕зр╕Ф: Web / Privilege Escalation  
> ЁЯзй р╕Др╕зр╕▓р╕бр╕вр╕▓р╕Б: Medium  
> ЁЯХ╡я╕ПтАНтЩВя╕П р╣Вр╕лр╕бр╕Ф: CTF р╣Бр╕Ър╕Ъ Capture The Flag  
> ЁЯзй URL: [Revenge](https://tryhackme.com/room/revenge)  
> ЁЯСитАНЁЯТ╗ р╕Ьр╕╣р╣Йр╕Чр╕│: Thanyakorn

---

## ЁЯУМ р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╣Вр╕Ир╕Чр╕вр╣М

> "What I want you to do is simple. Break into the server that's running the website and deface the front page."

ЁЯТм р╣Бр╕Ыр╕е: р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Вр╕Ир╕Чр╕вр╣Мр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Др╕╖р╕н р╣Ар╕Ир╕▓р╕░р╣Ар╕Вр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╣Бр╕ер╕░р╣Бр╕Бр╣Йр╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Б (deface)

---

## ЁЯЫ░я╕П 1. р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Ър╕╖р╣Йр╕нр╕Зр╕Хр╣Йр╕Щ (Target Info)

- IP р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕в: 10.10.28.30  
- р╕Юр╕нр╕гр╣Мр╕Хр╕Чр╕╡р╣Ир╣Ар╕Ыр╕┤р╕Ф: 22, 80

---

## р╕Чр╕Фр╕ер╕нр╕Зр╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М

- р╣Др╕Ыр╕Чр╕╡р╣Ир╣Ар╕бр╕Щр╕╣ **Products** р╕Ир╕░р╣Ар╕Ир╕нр╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓ 4 р╕гр╕▓р╕вр╕Бр╕▓р╕г  
- р╕Др╕ер╕┤р╕Б **LEARN MORE** р╕Вр╕нр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕Фр╕Бр╣Зр╣Др╕Фр╣Й

![Web site](images/1.png)

- р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓: Box of Duckies  
- р╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕гр╕╣р╕Ыр╕кр╕┤р╕Щр╕Др╣Йр╕▓, р╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕в, р╕гр╕▓р╕Др╕▓, р╕кр╕╡  
- р╕кр╕▒р╕Зр╣Ар╕Бр╕Х Path р╕Фр╣Йр╕▓р╕Щр╕Ър╕Щр╕Ир╕░р╣Ар╕Ыр╣Зр╕Щ `/products/1`  
- р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╣Ар╕Фр╕┤р╕б р╣Бр╕ер╣Йр╕зр╕Др╕ер╕┤р╕Б **LEARN MORE** р╕Вр╕нр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕нр╕╖р╣Ир╕Щ

![Products-Path](images/2.png)

- р╕Ир╕░р╣Ар╕лр╣Зр╕Щр╕зр╣Ир╕▓ Path р╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Ар╕Фр╕┤р╕бр╣Бр╕Хр╣Ир╕Хр╕▒р╕зр╣Ар╕ер╕Вр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ `/products/2`

![Products-Path](images/3.png)

- р╕ер╕нр╕Зр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Хр╕▒р╕зр╣Ар╕ер╕В 2 р╣Ар╕Ыр╣Зр╕Щ 3 р╣Гр╕Щ Path р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Кр╕┤р╣Йр╕Щр╕Чр╕╡р╣И 3

![Products-Path](images/4.png)

---

## ЁЯУМ р╕Юр╕┤р╕Ир╕▓р╕гр╕Ур╕▓р╣Ар╕Ър╕╖р╣Йр╕нр╕Зр╕Хр╣Йр╕Щ

- р╕Щр╣Ир╕▓р╕Ир╕░р╕бр╕╡р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Хр╕▓р╕б ID р╕Чр╕╡р╣Ир╕кр╣Ир╕Зр╕Ьр╣Ир╕▓р╕Щ URL  
- р╣Ар╕бр╕╖р╣Ир╕нр╕ер╕нр╕Зр╣Гр╕кр╣Ир╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕лр╕бр╕▓р╕в ' р╕Чр╕╡р╣И Path р╕Юр╕Ър╕зр╣Ир╕▓р╣Ар╕зр╣Зр╕Ър╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф HTTP 500 р╕Лр╕╢р╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щр╕кр╕▒р╕Нр╕Нр╕▓р╕Ур╕Ър╣Ир╕Зр╕Кр╕╡р╣Йр╕Кр╣Ир╕нр╕Зр╣Вр╕лр╕зр╣И SQL Injection  
- р╕Бр╕▓р╕гр╣Гр╕кр╣Ир╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕лр╕бр╕▓р╕в ' р╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕Ър╕Бр╕зр╕Щр╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е SQL query р╣Бр╕ер╕░р╕Фр╕╣р╕зр╣Ир╕▓р╕бр╕╡ error message р╕лр╕гр╕╖р╕нр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕░р╣Др╕гр╕лр╕ер╕╕р╕Фр╕бр╕▓р╕лр╕гр╕╖р╕нр╣Др╕бр╣И  

![Products-Path](images/5.png)

---

## ЁЯЪк 2. Initial Access

### ЁЯФ╕ 2.1 р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Кр╣Ир╕нр╕Зр╣Вр╕лр╕зр╣И SQL Injection р╕Фр╣Йр╕зр╕в sqlmap

р╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З:

bash
sqlmap -u "http://10.10.28.30/products/3*" --dbs


![Sqlmap](images/6.png)

ЁЯУЭ **р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Др╕│р╕кр╕▒р╣Ир╕З:**

- `sqlmap` р╕Др╕╖р╕нр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕нр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Кр╣Ир╕нр╕Зр╣Вр╕лр╕зр╣И SQL Injection р╣Бр╕ер╕░р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е  
- р╕Хр╕▒р╕зр╣Ар╕ер╕╖р╕нр╕Б `-u` р╣Гр╕Кр╣Йр╕гр╕░р╕Ър╕╕ URL р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ р╣Вр╕Фр╕в "http://10.10.28.30/products/3*" р╣Гр╕Кр╣Й wildcard 3* р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й sqlmap р╕ер╕нр╕Зр╕Др╣Ир╕▓р╕лр╕ер╕▓р╕в р╣Ж р╕Др╣Ир╕▓р╣Гр╕Щр╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣М id  
- р╕Хр╕▒р╕зр╣Ар╕ер╕╖р╕нр╕Б `--dbs` р╕кр╕▒р╣Ир╕Зр╣Гр╕лр╣Й sqlmap р╕Фр╕╢р╕Зр╕Кр╕╖р╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Чр╕╡р╣Ир╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Бр╕▒р╕Ър╣Ар╕зр╣Зр╕Ър╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕в  

![Sqlmap](images/7.png)

> р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: р╣Бр╕кр╕Фр╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╣Ир╕▓р╕З р╣Ж р╣Ар╕Кр╣Ир╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕ер╕▒р╕Б duckyinc р╣Бр╕ер╕░р╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕гр╕░р╕Ър╕Ър╕Вр╕нр╕З MySQL р╣Ар╕Кр╣Ир╕Щ mysql, information_schema р╣Ар╕Ыр╣Зр╕Щр╕Хр╣Йр╕Щ
> р╣Ар╕гр╕▓р╕Ир╕░р╕бр╕╕р╣Ир╕Зр╣Ар╕Щр╣Йр╕Щр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е duckyinc р╕Хр╣Ир╕нр╣Др╕Ы р╣Ар╕Юр╕гр╕▓р╕░р╣Ар╕Ыр╣Зр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕Др╕▒р╕Нр╕Вр╕нр╕Зр╣Ар╕зр╣Зр╕Ър╕Щр╕╡р╣Й

**р╕кр╕гр╕╕р╕Ы:**  
р╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╣Гр╕Кр╣Й sqlmap р╣Ар╕гр╕▓р╕Юр╕Ър╕Кр╣Ир╕нр╕Зр╣Вр╕лр╕зр╣И SQL Injection р╕Чр╕╡р╣Ир╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣М id р╕Вр╕нр╕З URL р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕ер╕▒р╕Бр╣Др╕Фр╣Й р╕Лр╕╢р╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щр╕Ир╕╕р╕Фр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Вр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Ир╕▓р╕░р╕гр╕░р╕Ър╕Ъ

### ЁЯФ╕ 2.2 р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е (Column Enumeration)

р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕Юр╕Ър╕зр╣Ир╕▓р╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕ер╕▒р╕Бр╕Др╕╖р╕н duckyinc р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Цр╕▒р╕Фр╣Др╕Ыр╕Др╕╖р╕нр╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Щр╕╡р╣Йр╕бр╕╡р╕Хр╕▓р╕гр╕▓р╕Зр╕нр╕░р╣Др╕гр╕Ър╣Йр╕▓р╕З р╣Бр╕ер╕░р╣Бр╕Хр╣Ир╕ер╕░р╕Хр╕▓р╕гр╕▓р╕Зр╕бр╕╡р╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╕нр╕░р╣Др╕гр╕Чр╕╡р╣Ир╕Щр╣Ир╕▓р╕кр╕Щр╣Гр╕И

р╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З:

```bash
sqlmap -u "http://10.10.28.30/products/3*" -D duckyinc --columns
```

![Sqlmap](images/8.png)

ЁЯУЭ **р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Др╕│р╕кр╕▒р╣Ир╕З:**

- `-D duckyinc` р╕гр╕░р╕Ър╕╕р╕Кр╕╖р╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕лр╣Й sqlmap р╕Чр╕│р╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е
- `--columns` р╣Гр╕лр╣Й sqlmap р╕Фр╕╢р╕Зр╕Кр╕╖р╣Ир╕нр╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Ир╕▓р╕Бр╕Чр╕╕р╕Бр╕Хр╕▓р╕гр╕▓р╕Зр╕ар╕▓р╕вр╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕гр╕░р╕Ър╕╕


р╣Ар╕бр╕╖р╣Ир╕нр╕гр╕▒р╕Щр╕Др╕│р╕кр╕▒р╣Ир╕Зр╣Бр╕ер╣Йр╕з sqlmap р╕Ир╕░р╕Цр╕▓р╕бр╕зр╣Ир╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕Хр╣Ир╕нр╕лр╕гр╕╖р╕нр╣Др╕бр╣И р╣Гр╕лр╣Йр╕Хр╕нр╕Ъ Y

![Sqlmap](images/9.png)

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: р╕Ир╕░р╣Ар╕лр╣Зр╕Щр╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕ар╕▓р╕вр╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е duckyinc р╕Лр╕╢р╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Чр╕╡р╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕вр╣Гр╕Щр╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Цр╕▒р╕Фр╣Др╕Ы

### ЁЯФ╕ 2.3 р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕Хр╕▓р╕гр╕▓р╕З user (Dump Table)

р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╣Ар╕гр╕▓р╕Чр╕гр╕▓р╕Ър╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Вр╕нр╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╣Йр╕з р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕Ир╕░р╣Ар╕Ыр╣Зр╕Щр╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ар╕▓р╕вр╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З user р╕Лр╕╢р╣Ир╕Зр╕нр╕▓р╕Ир╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕Др╕▒р╕Н р╣Ар╕Кр╣Ир╕Щ р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ р╕лр╕гр╕╖р╕нр╕Др╣Ир╕▓ Flag р╕Чр╕╡р╣Ир╣Ар╕гр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г

р╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З:

```bash
sqlmap -u "http://10.10.28.30/products/3*" -D duckyinc -T user --dump
```

![Sqlmap](images/10.png)

ЁЯУЭ **р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Др╕│р╕кр╕▒р╣Ир╕З:**

- `-D duckyinc` р╕гр╕░р╕Ър╕╕р╕Кр╕╖р╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕лр╣Й sqlmap р╕Чр╕│р╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е
- `-T user` р╕гр╕░р╕Ър╕╕р╕Хр╕▓р╕гр╕▓р╕Зр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е
- `--dump р╣Гр╕лр╣Й` sqlmap р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Ир╕▓р╕Бр╕Хр╕▓р╕гр╕▓р╕Зр╕Чр╕╡р╣Ир╕гр╕░р╕Ър╕╕

![Sqlmap](images/11.png)

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З user р╣Гр╕лр╣Йр╕кр╕▒р╕Зр╣Ар╕Бр╕Хр╕Др╕нр╕ер╕▒р╕бр╕Щр╣М credit_card р╕Вр╕нр╕З id = 6 р╕Лр╕╢р╣Ир╕Зр╕бр╕╡ Flag р╕Лр╣Ир╕нр╕Щр╕нр╕вр╕╣р╣И р╣Гр╕лр╣Йр╕Щр╕│р╣Др╕Ыр╣Гр╕Кр╣Йр╕Хр╕нр╕Ър╣Гр╕Щ TryHackMe

![Sqlmap](images/12.png)

---

### ЁЯФ╕ 2.4 р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕Хр╕▓р╕гр╕▓р╕З `system_user`

р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕Щр╕▒р╣Йр╕Щ р╣Ар╕гр╕▓р╕Ир╕░р╣Вр╕Яр╕Бр╕▒р╕кр╕Чр╕╡р╣Ир╕Хр╕▓р╕гр╕▓р╕З `system_user` р╕Лр╕╢р╣Ир╕Зр╕Др╕▓р╕Фр╕зр╣Ир╕▓р╕нр╕▓р╕Ир╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕гр╕░р╕Ър╕Ъ р╣Ар╕Кр╣Ир╕Щ admin р╕лр╕гр╕╖р╕нр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕Зр╕Бр╕▒р╕Ър╕Бр╕▓р╕гр╕вр╕Бр╕гр╕░р╕Фр╕▒р╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣М

р╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З:

```bash
sqlmap -u "http://10.10.28.30/products/3*" -D duckyinc --dump -T system_user
```
![Sqlmap](images/13.png)

ЁЯУЭ **р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Др╕│р╕кр╕▒р╣Ир╕З:**

- `-D duckyinc` р╕гр╕░р╕Ър╕╕р╕Кр╕╖р╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е
- `--dump` р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Ир╕▓р╕Бр╕Хр╕▓р╕гр╕▓р╕Зр╕Щр╕▒р╣Йр╕Щ
- `-T system_user` р╕гр╕░р╕Ър╕╕р╕Хр╕▓р╕гр╕▓р╕Зр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г

![Sqlmap](images/14.png)

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: р╕Юр╕Ъ username р╣Бр╕ер╕░ password р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щ hash (bcrypt)

### ЁЯФР 2.4 Credential Cracking with John

р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕Хр╕▓р╕гр╕▓р╕З `system_user` р╣Ар╕гр╕▓р╕Юр╕Ър╕зр╣Ир╕▓ password р╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ bcrypt р╕Лр╕╢р╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щ hash р╕Чр╕╡р╣Ир╕Щр╕┤р╕вр╕бр╣Гр╕Кр╣Йр╣Гр╕Щр╕гр╕░р╕Ър╕Ър╕Ир╕гр╕┤р╕З

---

## ЁЯЫая╕П р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Др╕Яр╕ер╣М hash

1. р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕Кр╕╖р╣Ир╕н `ducky` р╣Бр╕ер╣Йр╕зр╣Ар╕Вр╣Йр╕▓р╣Др╕Ыр╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М:

```bash
mkdir ducky
cd ducky
```

2. р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣Мр╕Кр╕╖р╣Ир╕н hashes.txt р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Бр╣Зр╕Ъ hash:

```bash
nano hashes.txt
```

3. р╕зр╕▓р╕З bcrypt hash р╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕Ир╕▓р╕Б sqlmap (р╣Гр╕Щр╕Чр╕╡р╣Ир╕Щр╕╡р╣Йр╣Гр╕кр╣Ир╣Ар╕Йр╕Юр╕▓р╕░р╕Вр╕нр╕З user server-admin)
> ЁЯУМ р╣Бр╕Щр╕░р╕Щр╕│р╣Гр╕лр╣Йр╕ер╕Ъ hash р╕нр╕╖р╣Ир╕Щ р╣Ж р╕нр╕нр╕Б р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й crack р╣Др╕Фр╣Йр╣Ар╕гр╣Зр╕зр╕Вр╕╢р╣Йр╕Щ

4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ hash р╕Цр╕╣р╕Бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в:

```bash
cat hashes.txt
```

## ЁЯзВ Crack Bcrypt Hash р╕Фр╣Йр╕зр╕в John the Ripper
ЁЯУж р╣Ар╕гр╕▓р╕Ир╕░р╣Гр╕Кр╣Й john р╕Др╕╣р╣Ир╕Бр╕▒р╕Ъ rockyou.txt р╣Гр╕Щр╕Бр╕▓р╕г Dictionary attack:

```bash
john hashes.txt --wordlist=/usr/share/wordlists/rockyou.txt
```

тЪая╕П р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕:
> р╕Цр╣Йр╕▓р╕бр╕▒р╕Щр╕Вр╕╢р╣Йр╕Щр╕зр╣Ир╕▓ No password hashes left to crack р╕лр╕бр╕▓р╕вр╕Др╕зр╕▓р╕бр╕зр╣Ир╕▓ john р╣Др╕Фр╣Йр╕Чр╕│р╕Бр╕▓р╕гр╕Цр╕нр╕Фр╕гр╕лр╕▒р╕кр╣Бр╕ор╕Кр╕Чр╕╡р╣Ир╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Др╕Яр╕ер╣М hashes.txt р╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╣Др╕бр╣Ир╕бр╕╡р╣Бр╕ор╕Кр╕Чр╕╡р╣Ир╣Ар╕лр╕ер╕╖р╕нр╣Гр╕лр╣Йр╕Чр╕│р╕Бр╕▓р╕гр╕Цр╕нр╕Фр╕гр╕лр╕▒р╕кр╕Ир╕▓р╕Бр╣Др╕Яр╕ер╣Мр╕Щр╕▒р╣Йр╕Щ

- р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕гр╕▒р╕Щр╣Ар╕кр╕гр╣Зр╕Ир╕гр╕нр╕Ир╕Щр╕Бр╕зр╣Ир╕▓р╕Ир╕░ crack р╕кр╕│р╣Ар╕гр╣Зр╕И р╕Ир╕▓р╕Бр╕Щр╕▒р╣Йр╕Щр╕Фр╕╣р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╣Вр╕Фр╕вр╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З:
```bash
john --show hashes.txt
```
